<%- include('./_layouts/_head.ejs') %>
<div class="container my-4">
  <h2 class="mb-4">File Uploader</h2>
  <% if (locals.fileLinks != null) { %>
  <table class="mb-4">
    <thead>
      <th>File</th>
      <th>Download Count</th>
    </thead>
    <tbody>
      <% locals.fileLinks.forEach(file => { %>
      <tr class="mb-2">
        <td>
          <a href="<%= file.link %>" title="<%= file.originalName %>"
            ><%= file.originalName %></a
          >
        </td>
        <td class="text-end"><%= file.downloadCount %></td>
        <td>
          <form action="/delete/<%= file.id %>" method="POST">
          <button class="btn btn-link" type="submit">
            <i class="fa-sharp fa-solid fa-trash link-danger" title="Delete <%= file.originalName %>"></i>
          </button>
        </form>
        </td>
      </tr>
      <% }) %>
    </tbody>
  </table>
  <% } %>
  <form action="/upload" method="post" enctype="multipart/form-data">
    <div class="form-group mb-4">
      <label for="file" class="form-label h6"> File: </label>
      <input type="file" name="file" id="file" class="form-control" />
    </div>
    <div class="form-group mb-4">
      <label for="password" class="form-label h6">Password: </label>
      <input
        type="password"
        name="password"
        id="password"
        class="form-control"
      />
    </div>
    <div class="form-group mb-4 d-flex" style="gap: 1rem">
      <button type="submit" class="btn btn-primary">Share</button>
    </div>
    <!-- <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div> -->
  </form>
</div>
<%- include('./_layouts/_tail.ejs') %>
